# ======================
# App
# ======================
spring.application.name=progetto-filiera
spring.main.headless=false

# ======================
# Database H2 (file-based con persistenza)
# ======================
# Percorso assoluto/relativo al file del DB (crea la cartella se non esiste)
spring.datasource.url=jdbc:h2:file:./db-data/filiera_agricola;DB_CLOSE_DELAY=-1
spring.datasource.driverClassName=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=

# ======================
# JPA / Hibernate
# ======================
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
# Hibernate riconosce automaticamente il dialect da H2, ma lasciamo per chiarezza:
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect

# ======================
# Console H2
# ======================
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console
# Se vuoi accedervi da rete locale, abilita:
# spring.h2.console.settings.web-allow-others=true

# ======================
# Logging SQL
# ======================
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

# ======================
# Upload file / Multipart
# ======================
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=20MB

spring.web.resources.static-locations=classpath:/static/,file:./uploads/
spring.thymeleaf.cache=false
spring.web.resources.cache.period=0
spring.web.resources.chain.cache=false
spring.devtools.restart.enabled=true
spring.devtools.livereload.enabled=true
spring.web.resources.cache.cachecontrol.no-cache=true


# ======================
# Script SQL (schema.sql e data.sql)
# ======================
spring.sql.init.mode=always
spring.jpa.defer-datasource-initialization=true

