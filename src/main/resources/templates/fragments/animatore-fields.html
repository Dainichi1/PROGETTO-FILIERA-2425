<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>

<!-- Campi standard per la creazione di una Visita -->
<div th:fragment="visita-fields(suffix)">
    <!-- Nome -->
    <label th:for="|nome-${suffix}|">Nome:</label>
    <input type="text" th:field="*{nome}" th:id="|nome-${suffix}|"
           th:classappend="${#fields.hasErrors('nome')} ? 'error'"/>
    <span class="error-message"
          th:utext="${#fields.hasErrors('nome')} ? ${#strings.arrayJoin(#fields.errors('nome'), '<br/>')} : ''"></span>

    <!-- Descrizione -->
    <label th:for="|descrizione-${suffix}|">Descrizione:</label>
    <textarea th:field="*{descrizione}" th:id="|descrizione-${suffix}|"
              th:classappend="${#fields.hasErrors('descrizione')} ? 'error'"></textarea>
    <span class="error-message"
          th:utext="${#fields.hasErrors('descrizione')} ? ${#strings.arrayJoin(#fields.errors('descrizione'), '<br/>')} : ''"></span>

    <!-- Indirizzo -->
    <label th:for="|indirizzo-${suffix}|">Indirizzo:</label>
    <input type="text" th:field="*{indirizzo}" th:id="|indirizzo-${suffix}|"
           th:classappend="${#fields.hasErrors('indirizzo')} ? 'error'"/>
    <span class="error-message"
          th:utext="${#fields.hasErrors('indirizzo')} ? ${#strings.arrayJoin(#fields.errors('indirizzo'), '<br/>')} : ''"></span>

    <!-- Data Inizio -->
    <label th:for="|dataInizio-${suffix}|">Data Inizio:</label>
    <input type="date" th:field="*{dataInizio}" th:id="|dataInizio-${suffix}|"
           th:classappend="${#fields.hasErrors('dataInizio')} ? 'error'"/>
    <span class="error-message"
          th:utext="${#fields.hasErrors('dataInizio')} ? ${#strings.arrayJoin(#fields.errors('dataInizio'), '<br/>')} : ''"></span>

    <!-- Data Fine -->
    <label th:for="|dataFine-${suffix}|">Data Fine:</label>
    <input type="date" th:field="*{dataFine}" th:id="|dataFine-${suffix}|"
           th:classappend="${#fields.hasErrors('dataFine')} ? 'error'"/>
    <span class="error-message"
          th:utext="${#fields.hasErrors('dataFine')} ? ${#strings.arrayJoin(#fields.errors('dataFine'), '<br/>')} : ''"></span>

    <!-- Destinatari -->
    <label>Destinatari:</label>
    <div id="destinatari-container">
        <label th:each="utente : ${destinatari}">
            <input type="checkbox" name="destinatari" th:value="${utente.username}"
                   th:checked="${visitaDto.destinatari != null and #lists.contains(visitaDto.destinatari, utente.username)}"/>
            <span th:text="${utente.nome + ' ' + utente.cognome + ' - ' + utente.ruolo}"></span>
        </label>
    </div>
    <span class="error-message"
          th:utext="${#fields.hasErrors('destinatari')} ? ${#strings.arrayJoin(#fields.errors('destinatari'), '<br/>')} : ''"></span>
</div>


<!-- Campi standard per la creazione di una Fiera -->
<div th:fragment="fiera-fields(suffix)">
    <!-- Nome -->
    <label th:for="|nome-${suffix}|">Nome:</label>
    <input type="text" th:field="*{nome}" th:id="|nome-${suffix}|"
           th:classappend="${#fields.hasErrors('nome')} ? 'error'"/>
    <span class="error-message"
          th:utext="${#fields.hasErrors('nome')} ? ${#strings.arrayJoin(#fields.errors('nome'), '<br/>')} : ''"></span>

    <!-- Descrizione -->
    <label th:for="|descrizione-${suffix}|">Descrizione:</label>
    <textarea th:field="*{descrizione}" th:id="|descrizione-${suffix}|"
              th:classappend="${#fields.hasErrors('descrizione')} ? 'error'"></textarea>
    <span class="error-message"
          th:utext="${#fields.hasErrors('descrizione')} ? ${#strings.arrayJoin(#fields.errors('descrizione'), '<br/>')} : ''"></span>

    <!-- Indirizzo -->
    <label th:for="|indirizzo-${suffix}|">Indirizzo:</label>
    <input type="text" th:field="*{indirizzo}" th:id="|indirizzo-${suffix}|"
           th:classappend="${#fields.hasErrors('indirizzo')} ? 'error'"/>
    <span class="error-message"
          th:utext="${#fields.hasErrors('indirizzo')} ? ${#strings.arrayJoin(#fields.errors('indirizzo'), '<br/>')} : ''"></span>

    <!-- Prezzo -->
    <label th:for="|prezzo-${suffix}|">Prezzo (â‚¬):</label>
    <input type="number" step="0.01" min="0" th:field="*{prezzo}" th:id="|prezzo-${suffix}|"
           th:classappend="${#fields.hasErrors('prezzo')} ? 'error'"/>
    <span class="error-message"
          th:utext="${#fields.hasErrors('prezzo')} ? ${#strings.arrayJoin(#fields.errors('prezzo'), '<br/>')} : ''"></span>

    <!-- Data Inizio -->
    <label th:for="|dataInizio-${suffix}|">Data Inizio:</label>
    <input type="date" th:field="*{dataInizio}" th:id="|dataInizio-${suffix}|"
           th:classappend="${#fields.hasErrors('dataInizio')} ? 'error'"/>
    <span class="error-message"
          th:utext="${#fields.hasErrors('dataInizio')} ? ${#strings.arrayJoin(#fields.errors('dataInizio'), '<br/>')} : ''"></span>

    <!-- Data Fine -->
    <label th:for="|dataFine-${suffix}|">Data Fine:</label>
    <input type="date" th:field="*{dataFine}" th:id="|dataFine-${suffix}|"
           th:classappend="${#fields.hasErrors('dataFine')} ? 'error'"/>
    <span class="error-message"
          th:utext="${#fields.hasErrors('dataFine')} ? ${#strings.arrayJoin(#fields.errors('dataFine'), '<br/>')} : ''"></span>
</div>

</body>
</html>
