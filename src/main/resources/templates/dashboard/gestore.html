<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="it">
<head>
    <title>Dashboard Gestore</title>
    <meta charset="UTF-8"/>
    <meta name="_csrf" th:content="${_csrf.token}"/>
    <meta name="_csrf_header" th:content="${_csrf.headerName}"/>
    <link rel="stylesheet" th:href="@{/css/dashboard.css}">
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
</head>
<body>
<h1 th:text="'Benvenuto ' + (${utente?.nome ?: 'Utente'}) +
              ', il tuo ruolo è ' + (${utente?.ruolo ?: 'Gestore della Piattaforma'}) + '.'">
    Benvenuto, il tuo ruolo è Gestore della Piattaforma.
</h1>

<!-- ================== AZIONI PRINCIPALI ================== -->
<div class="actions-container">
    <a th:href="@{/gestore/contenuti}" class="btn-primary">
        📊 Visualizza contenuto della piattaforma
    </a>
    <button id="btnSocialFeed" type="button" class="btn-primary">
        📢 Visualizza Social Network
    </button>
    <button id="btnDeleteProfile" class="btn btn-danger btn-lg ms-2">
        🗑️ Elimina profilo
    </button>
    <button id="btnViewDeletionRequests" class="btn btn-primary">
        📋 Visualizza richieste di eliminazione in attesa
    </button>
    <button id="btnGestioneIndirizziMappa" class="btn-primary">
        🗺️ Gestione indirizzi per mappa
    </button>
    <button id="btnApriMappa" class="btn-primary">
        🌍 Visualizza mappa
    </button>
</div>

<!-- ================== MODALI ================== -->
<!-- Modale semplice per conferma apertura contenuti -->
<div id="contenutiModal" class="modal" style="display:none;">
    <div class="modal-content">
        <h3>Contenuti della piattaforma</h3>
        <p>Vuoi aprire la schermata di consultazione dei contenuti?</p>
        <div class="actions-container">
            <button id="btnApriContenuti" class="btn-primary">Apri</button>
            <button id="btnChiudiContenuti" class="btn-secondary">Chiudi</button>
        </div>
    </div>
</div>

<!-- Modale generica eliminazione profilo -->
<div th:replace="fragments/profile-delete-modal :: profile-delete-modal"></div>

<!-- Modali specifici per gestore -->
<div th:replace="fragments/gestore-modals :: modals"></div>
<div th:replace="fragments/profile-delete-notification :: profile-delete-notification"></div>

<!-- ================== MODALI SOCIAL ================== -->
<div th:replace="fragments/modals :: social-modals('/gestore/dashboard')"></div>
<div th:replace="fragments/modals :: social-feed-modal"></div>
<div th:replace="fragments/modals :: social-not-available-modal"></div>

<hr class="section-separator"/>

<p><a th:href="@{/}" class="btn-secondary">⬅ Torna alla Home</a></p>

<!-- ================== SCRIPT ================== -->
<!-- Leaflet JS -->
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script type="module" th:src="@{/js/pages/gestore.js}"></script>
</body>
</html>
