<div class="dettagli" style="font-family: Arial, sans-serif;">
    <div style="background:#f9f9f9; border:1px solid #ddd; border-radius:8px; padding:1rem; margin-bottom:1rem;">
        <h2 style="margin-top:0; font-size:1.4rem; color:#2e7d32;"
            th:text="${elemento.nome}">Nome elemento</h2>
        <p><strong>ğŸ“ Descrizione:</strong> <span th:text="${elemento.descrizione}"></span></p>
        <p><strong>ğŸ‘¤ Creato da:</strong> <span th:text="${elemento.creatoDa}"></span></p>
    </div>

    <!-- ============ PRODOTTO ============ -->
    <div th:if="${tipo == 'prodotto'}"
         style="background:#fff; border:1px solid #eee; border-radius:6px; padding:0.8rem; margin-bottom:1rem;">
        <h3>ğŸ Dettagli prodotto</h3>
        <p><strong>ğŸ“¦ QuantitÃ :</strong> <span th:text="${elemento.quantita}"></span></p>
        <p><strong>ğŸ’° Prezzo:</strong> <span th:text="${elemento.prezzo}"></span> â‚¬</p>

        <!-- FOTO -->
        <div>
            <h4>ğŸ“¸ Foto</h4>
            <div th:if="${#strings.isEmpty(elemento.fotoCsv)}">-</div>
            <ul th:if="${!#strings.isEmpty(elemento.fotoCsv)}" style="list-style:none; padding:0;">
                <li th:each="foto : ${#strings.arraySplit(elemento.fotoCsv, ',')}">
                    <a th:href="@{'/file/foto/' + ${foto}}" target="_blank">
                        <img th:src="@{'/file/foto/' + ${foto}}" style="max-width:200px; border:1px solid #ccc; border-radius:6px;"/>
                    </a>
                </li>
            </ul>
        </div>

        <!-- CERTIFICATI -->
        <div>
            <h4>ğŸ“œ Certificati</h4>
            <div th:if="${#strings.isEmpty(elemento.certificatiCsv)}">-</div>
            <ul th:if="${!#strings.isEmpty(elemento.certificatiCsv)}" style="list-style:none; padding:0;">
                <li th:each="cert : ${#strings.arraySplit(elemento.certificatiCsv, ',')}">
                    <a th:href="@{'/file/certificati/' + ${cert}}" th:text="${cert}" target="_blank"></a>
                </li>
            </ul>
        </div>
    </div>

    <!-- ============ PACCHETTO ============ -->
    <div th:if="${tipo == 'pacchetto'}"
         style="background:#fff; border:1px solid #eee; border-radius:6px; padding:0.8rem; margin-bottom:1rem;">
        <h3>ğŸ“¦ Dettagli pacchetto</h3>
        <p><strong>ğŸ“¦ QuantitÃ :</strong> <span th:text="${elemento.quantita}"></span></p>
        <p><strong>ğŸ’° Prezzo:</strong> <span th:text="${elemento.prezzo}"></span> â‚¬</p>

        <!-- FOTO -->
        <div>
            <h4>ğŸ“¸ Foto</h4>
            <div th:if="${#strings.isEmpty(elemento.fotoCsv)}">-</div>
            <ul th:if="${!#strings.isEmpty(elemento.fotoCsv)}" style="list-style:none; padding:0;">
                <li th:each="foto : ${#strings.arraySplit(elemento.fotoCsv, ',')}">
                    <a th:href="@{'/file/foto/' + ${foto}}" target="_blank">
                        <img th:src="@{'/file/foto/' + ${foto}}" style="max-width:200px; border:1px solid #ccc; border-radius:6px;"/>
                    </a>
                </li>
            </ul>
        </div>

        <!-- CERTIFICATI -->
        <div>
            <h4>ğŸ“œ Certificati</h4>
            <div th:if="${#strings.isEmpty(elemento.certificatiCsv)}">-</div>
            <ul th:if="${!#strings.isEmpty(elemento.certificatiCsv)}" style="list-style:none; padding:0;">
                <li th:each="cert : ${#strings.arraySplit(elemento.certificatiCsv, ',')}">
                    <a th:href="@{'/file/certificati/' + ${cert}}" th:text="${cert}" target="_blank"></a>
                </li>
            </ul>
        </div>

        <!-- PRODOTTI INCLUSI -->
        <h4>ğŸ“¦ Prodotti inclusi</h4>
        <ul>
            <li th:each="nomeProdotto : ${elemento.prodottiNomi}" th:text="${nomeProdotto}"></li>
        </ul>
    </div>

    <!-- ============ TRASFORMATO ============ -->
    <div th:if="${tipo == 'trasformato'}"
         style="background:#fff; border:1px solid #eee; border-radius:6px; padding:0.8rem; margin-bottom:1rem;">
        <h3>ğŸ· Dettagli prodotto trasformato</h3>
        <p><strong>ğŸ“¦ QuantitÃ :</strong> <span th:text="${elemento.quantita}"></span></p>
        <p><strong>ğŸ’° Prezzo:</strong> <span th:text="${elemento.prezzo}"></span> â‚¬</p>

        <!-- FOTO -->
        <div>
            <h4>ğŸ“¸ Foto</h4>
            <div th:if="${#strings.isEmpty(elemento.fotoCsv)}">-</div>
            <ul th:if="${!#strings.isEmpty(elemento.fotoCsv)}" style="list-style:none; padding:0;">
                <li th:each="foto : ${#strings.arraySplit(elemento.fotoCsv, ',')}">
                    <a th:href="@{'/file/foto/' + ${foto}}" target="_blank">
                        <img th:src="@{'/file/foto/' + ${foto}}" style="max-width:200px; border:1px solid #ccc; border-radius:6px;"/>
                    </a>
                </li>
            </ul>
        </div>

        <!-- CERTIFICATI -->
        <div>
            <h4>ğŸ“œ Certificati</h4>
            <div th:if="${#strings.isEmpty(elemento.certificatiCsv)}">-</div>
            <ul th:if="${!#strings.isEmpty(elemento.certificatiCsv)}" style="list-style:none; padding:0;">
                <li th:each="cert : ${#strings.arraySplit(elemento.certificatiCsv, ',')}">
                    <a th:href="@{'/file/certificati/' + ${cert}}" th:text="${cert}" target="_blank"></a>
                </li>
            </ul>
        </div>

        <!-- FASI DI PRODUZIONE -->
        <div th:if="${elemento.fasiProduzione != null and !elemento.fasiProduzione.isEmpty()}">
            <h4>ğŸŒ¾ Fasi di produzione</h4>
            <ul>
                <li th:each="fase : ${elemento.fasiProduzione}">
                    <strong th:text="${fase.descrizioneFase}"></strong>
                    (<span th:text="${fase.produttoreUsername}"></span> â†’
                    <span th:text="${fase.prodottoOrigineId}"></span>)
                </li>
            </ul>
        </div>
    </div>

    <!-- Visita -->
    <div th:if="${tipo == 'visita'}"
         style="background:#fff; border:1px solid #eee; border-radius:6px; padding:0.8rem; margin-bottom:1rem;">
        <h3 style="margin-top:0; font-size:1.1rem; border-left:4px solid #4CAF50; padding-left:6px;">ğŸŸ Dettagli visita</h3>
        <p><strong>ğŸ“ Indirizzo:</strong> <span th:text="${elemento.indirizzo}"></span></p>
        <p><strong>ğŸ—“ Periodo:</strong>
            <span th:text="${#temporals.format(elemento.dataInizio, 'dd/MM/yyyy')}"></span>
            -
            <span th:text="${#temporals.format(elemento.dataFine, 'dd/MM/yyyy')}"></span>
        </p>
        <p><strong>ğŸ‘¥ Destinatari:</strong>
            <span th:text="${elemento.destinatari}"></span>
        </p>
    </div>

    <!-- Fiera -->
    <div th:if="${tipo == 'fiera'}"
         style="background:#fff; border:1px solid #eee; border-radius:6px; padding:0.8rem;">
        <h3 style="margin-top:0; font-size:1.1rem; border-left:4px solid #4CAF50; padding-left:6px;">ğŸª Dettagli fiera</h3>
        <p><strong>ğŸ“ Indirizzo:</strong> <span th:text="${elemento.indirizzo}"></span></p>
        <p><strong>ğŸ—“ Periodo:</strong>
            <span th:text="${#temporals.format(elemento.dataInizio, 'dd/MM/yyyy')}"></span>
            -
            <span th:text="${#temporals.format(elemento.dataFine, 'dd/MM/yyyy')}"></span>
        </p>
        <p><strong>ğŸ’° Prezzo:</strong>
            <span th:text="${elemento.prezzo}"></span> â‚¬
        </p>
        <p><strong>ğŸ‘¤ Organizzatore:</strong>
            <span th:text="${elemento.creatoDa}"></span>
        </p>
    </div>
</div>
