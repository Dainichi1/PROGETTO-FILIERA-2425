<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>

<!-- Campi standard -->
<div th:fragment="base-fields(suffix)">
    <label th:for="|nome-${suffix}|">Nome:</label>
    <input type="text" th:field="*{nome}" th:id="|nome-${suffix}|"
           th:classappend="${#fields.hasErrors('nome')} ? 'error'"/>
    <span class="error-message"
          th:utext="${#fields.hasErrors('nome')} ? ${#strings.arrayJoin(#fields.errors('nome'), '<br/>')} : ''"></span>

    <label th:for="|descrizione-${suffix}|">Descrizione:</label>
    <textarea th:field="*{descrizione}" th:id="|descrizione-${suffix}|"
              th:classappend="${#fields.hasErrors('descrizione')} ? 'error'"></textarea>
    <span class="error-message"
          th:utext="${#fields.hasErrors('descrizione')} ? ${#strings.arrayJoin(#fields.errors('descrizione'), '<br/>')} : ''"></span>

    <label th:for="|quantita-${suffix}|">Quantit√†:</label>
    <input type="number" th:field="*{quantita}" th:id="|quantita-${suffix}|"
           th:classappend="${#fields.hasErrors('quantita')} ? 'error'"/>
    <span class="error-message"
          th:utext="${#fields.hasErrors('quantita')} ? ${#strings.arrayJoin(#fields.errors('quantita'), '<br/>')} : ''"></span>

    <label th:for="|prezzo-${suffix}|">Prezzo:</label>
    <input type="number" step="0.01" th:field="*{prezzo}" th:id="|prezzo-${suffix}|"
           th:classappend="${#fields.hasErrors('prezzo')} ? 'error'"/>
    <span class="error-message"
          th:utext="${#fields.hasErrors('prezzo')} ? ${#strings.arrayJoin(#fields.errors('prezzo'), '<br/>')} : ''"></span>

    <label th:for="|indirizzo-${suffix}|">Indirizzo:</label>
    <input type="text" th:field="*{indirizzo}" th:id="|indirizzo-${suffix}|"
           th:classappend="${#fields.hasErrors('indirizzo')} ? 'error'"/>
    <span class="error-message"
          th:utext="${#fields.hasErrors('indirizzo')} ? ${#strings.arrayJoin(#fields.errors('indirizzo'), '<br/>')} : ''"></span>

    <label th:for="|certificati-${suffix}|">Certificati:</label>
    <input type="file" th:field="*{certificati}" th:id="|certificati-${suffix}|" multiple
           th:classappend="${#fields.hasErrors('certificati')} ? 'error'"/>
    <span class="error-message"
          th:utext="${#fields.hasErrors('certificati')} ? ${#strings.arrayJoin(#fields.errors('certificati'), '<br/>')} : ''"></span>

    <label th:for="|foto-${suffix}|">Foto:</label>
    <input type="file" th:field="*{foto}" th:id="|foto-${suffix}|" multiple
           th:classappend="${#fields.hasErrors('foto')} ? 'error'"/>
    <span class="error-message"
          th:utext="${#fields.hasErrors('foto')} ? ${#strings.arrayJoin(#fields.errors('foto'), '<br/>')} : ''"></span>
</div>

<!-- Pulsanti e modali comuni -->
<div th:fragment="form-buttons(entityName, redirectPath)">
    <div id="createButtons">
        <button type="button" onclick="modalUtils.openModal('createConfirmModal')">Invia</button>
    </div>
    <div id="updateButtons" style="display:none;">
        <button type="button" onclick="modalUtils.openModal('updateConfirmModal')">Aggiorna</button>
    </div>
    <button type="button" onclick="crudUtils.toggleForm()">Chiudi Form</button>

    <!-- Inclusione modali creazione/modifica -->
    <div th:replace="fragments/modals :: create-update-modals(${entityName}, ${redirectPath})"></div>
</div>

</body>
</html>
